<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<style>
  :host {
    display: block;
    margin: 1em 0;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
  }

  .code-container {
    background: #282c34;
    border-radius: 8px;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.3);
    overflow: hidden;
  }

  .code-header {
    background: #21252b;
    color: #ffffff;
    padding: 0.5em 1em;
    font-size: 0.875em;
    border-bottom: 1px solid #3a3f4b;
    position: relative; /* allow absolutelyâ€‘positioned button */
  }

  .copy-button {
    position: absolute;
    right: 1em;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #61dafb;
    cursor: pointer;
    font-size: 0.875em;
  }

  pre {
    margin: 0;
    padding: 1em;
    overflow: auto;
  }
</style>
<div class="code-container">
  <div class="code-header">
    {filename}
    <button class="copy-button" onclick="copyCode">Copy</button>
  </div>
  <pre><code id="code" class="language-html"></code></pre>
</div>
<slot></slot>

<script>
  const codeElement = this.querySelector("pre code");

  const copyCode = () => {
    navigator.clipboard.writeText(this.innerHTML).then(() => {
      this.emit("copied", { message: "Code copied to clipboard!" });
    });
  };

  codeElement.textContent = this.innerHTML;
  hljs.highlightElement(codeElement);

  const slotEl = this.querySelector("slot");
  if (slotEl) slotEl.remove();
</script>
